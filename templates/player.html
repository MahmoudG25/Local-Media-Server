<!DOCTYPE html>
<html lang="en" data-theme="dark">
  <head>
    <meta charset="utf-8" />
    <title>{{ name }} - Player</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Bootstrap (Ø§Ø®ØªÙŠØ§Ø±ÙŠ Ù„Ù„Ù€ grid) -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- Main CSS -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/main.css') }}"
    />
  </head>
  <body>
    <header class="player-navbar">
      <div
        class="container d-flex justify-content-between align-items-center gap-2"
      >
        <a href="{{ url_for('index') }}" class="btn-nav">
          <span>â¬…</span>
          <span>Back to library</span>
        </a>

        <div
          class="d-none d-md-block text-truncate text-muted"
          style="max-width: 45vw; font-size: 0.85rem"
        >
          {{ name }}
        </div>

        <div class="d-flex align-items-center gap-2">
          <button
            id="theme-toggle"
            class="theme-toggle"
            type="button"
            aria-label="Toggle dark / light mode"
          >
            <span data-theme-icon>ðŸŒ™</span>
            <span data-theme-label>Dark</span>
            <span class="theme-toggle-knob"></span>
          </button>

          <a
            href="{{ url_for('download_file', filename=relpath) }}"
            class="btn-nav"
          >
            <span>â¬‡</span>
            <span>Download</span>
          </a>
        </div>
      </div>
    </header>

    <main class="video-shell">
      <div class="title-chip text-truncate">
        <strong>Now playing:</strong> {{ name }}
      </div>

      <video controls preload="metadata" playsinline>
        <source
          src="{{ url_for('stream_file', filename=relpath) }}"
          type="{{ mimetype }}"
        />
        Your browser does not support the video tag.
      </video>
    </main>

    <footer class="footer-meta text-center">
      Streaming from your local media server
    </footer>

    <!-- Theme JS -->
    <script src="{{ url_for('static', filename='js/theme.js') }}"></script>
  </body>
</html>
